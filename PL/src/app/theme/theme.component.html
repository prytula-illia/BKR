<h1 class="mb-5" style="text-align: center;">Themes</h1>

<div class="container p-3 working-area">
    <button class="btn btn-success btn-sm btn-block my-3 mx-3 float-end" (click)="createTheme()">Create Theme</button>
   <div class="container p-5" *ngFor="let t of service.themes">
    <div class="my-2">
        <h3>{{t.title}}</h3>
        <hr>
        <p>{{t.description}}<p>
        <div class="my-3" layoyt="row">
            <button class="btn btn-primary btn-sm btn-block my-3 mx-1 float-end mybutton" 
            style="width: 200px; background-color: rgb(0, 77, 193);" (click)="learnTheme(t.id)">Learn theme!</button>
            <button class="btn btn-success btn-sm btn-block my-3 mx-1 float-end" (click)="updateTheme(updateThemeModal)"  *ngIf="loginService.getCurrentUserRole() === 'admin'">Update theme</button>
            <button class="btn btn-danger btn-sm btn-block my-3 mx-1 float-end" (click)="deleteTheme(deleteThemeModal)"  *ngIf="loginService.getCurrentUserRole() === 'admin'">Delete theme</button>
        </div>        
        <ng-template #updateThemeModal let-modal>
            <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">Update theme</h4>
            </div>
            <div class="container mb-3">
                <div class="form-group mt-3">
                    <label>Name: </label>
                    <input class="form-control form-control-sm" name="name" value="{{t.title}}" #title>
                </div>
                <div class="form-group mt-3">
                    <label>Description: </label>
                    <textarea class="form-control form-control-sm" style="min-height: 200px;"name="description" value="{{t.description}}" #description></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss()">Cancel</button>
                <button type="button" class="btn btn-success" (click)="modal.close
                ({
                    id: t.id,
                    title: title.value,
                    description: description.value,
                    tasks : t.tasks,
                    studyingMaterials : t.studyingMaterials
                  })">Update</button>
            </div>
        </ng-template>

        <ng-template #deleteThemeModal let-modal>
            <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">Delete theme</h4>
            </div>
            <div class="modal-body">Do you want to delete this theme?</div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss()">Cancel</button>
                <button type="button" class="btn btn-danger" (click)="modal.close(t.id)">Delete</button>
            </div>
        </ng-template>
    </div>    
   </div>   
</div>